<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HAKIMAIL — Εσωτερική Αλληλογραφία</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main id="main-root">
    <!-- LOGIN (centered full screen) -->
    <section id="login-screen" class="center-screen card">
      <h1>HAKIMAIL</h1>
      <p class="muted">Σύνδεση τμήματος</p>

      <label>Τμήμα
        <select id="login-dept"></select>
      </label>

      <label>Κωδικός
        <input id="login-pass" type="password" autocomplete="current-password" />
      </label>

      <div class="login-actions">
        <button id="btn-login">ΣΥΝΔΕΣΗ</button>
      </div>

      <p class="hint">Demo: <b>ΠΥΡΣΕΙΑΣ</b> → admin123 · όλα τα άλλα → 1234</p>
    </section>

    <!-- DASHBOARD -->
    <section id="dashboard" class="hidden">
      <header class="topbar">
        <div><strong id="who"></strong></div>
        <div class="top-actions">
          <button id="btn-change-pass">Αλλαγή Κωδικού</button>
        </div>
      </header>

      <div class="content">
        <div class="grid">
          <div class="card">
            <h3>Αποστολή Εγγράφου</h3>
            <form id="upload-form">
              <label>Αρχείο (οποιοδήποτε τύπο)
                <input id="file-input" type="file" accept="*/*" />
              </label>

              <label>Προς
                <select id="to-select"></select>
              </label>

              <label>Σχόλιο
                <textarea id="msg" rows="3"></textarea>
              </label>

              <div style="display:flex;gap:8px;">
                <button type="submit">Αποστολή</button>
                <button id="btn-save-single" type="button" title="Αποθήκευση επιλεγμένου αρχείου">Αποθήκευση (τοπικά)</button>
              </div>

              <p id="upload-status" class="hint"></p>
            </form>
          </div>

          <div class="card">
            <h3>Εισερχόμενα</h3>
            <div id="inbox-list" class="list"></div>
          </div>

          <div class="card">
            <h3>Εξερχόμενα</h3>
            <div id="outbox-list" class="list"></div>
          </div>
        </div>

        <!-- Admin-only -->
        <div id="admin-area" class="card hidden">
          <h3>Ενέργειες / Ιστορικό (Admin)</h3>
          <p class="muted">Μόνο για τον ΠΥΡΣΕΙΑΣ</p>
          <button id="btn-open-history">Άνοιγμα Ιστορικού</button>
        </div>
      </div>

      <footer class="footer">
        <div class="footer-left">
          <small>HAKIMAIL — Backendless edition</small>
        </div>
        <div class="footer-right">
          <button id="btn-save-all">Αποθήκευση Όλων (ZIP)</button>
          <button id="btn-logout">Αποσύνδεση</button>
        </div>
      </footer>
    </section>

    <!-- HISTORY PAGE (admin full page) -->
    <section id="history-page" class="hidden">
      <header class="topbar">
        <h2>Ιστορικό Ενεργειών</h2>
        <button id="btn-back">⟵ Πίσω</button>
      </header>

      <div class="content">
        <div class="card">
          <label>Φίλτρο Τμήματος
            <select id="actions-filter"></select>
          </label>
          <div id="actions-list" class="list"></div>
          <!-- Καθαρισμός ιστορικού: δημιουργείται δυναμικά μόνο για admin -->
        </div>
      </div>
    </section>
  </main>

  <!-- modal για προβολή αρχείου -->
  <div id="modal" class="modal hidden">
    <div class="modal-inner card">
      <button id="modal-close" class="close">✕</button>
      <div id="modal-content"></div>
    </div>
  </div>

  <!-- SDKs & libs: Backendless + JSZip + FileSaver -->
  <script src="https://cdn.backendless.com/sdk/js/latest/backendless.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <script src="app.js"></script>
</body>
</html>